<!-- Generated by SpecStory -->

# チャット設定とモデルの問題 (2025-05-22 16:35Z)

_**User**_

問題は解決したきが数ビューポート。

ただしプロンプトを送信した時の送信先が「google/gemini-2.0-flash-001とopenai/gpt-4o-mini」で固定になってない？設定モーダルで設定したものを採用してください。（値がない場合はサイトにアクセスした時点で自動的にローカルストレージを指定）



ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": true,
      "timestamp": 1747931527097
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931526001
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: '', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: '', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？\n",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": true,
      "timestamp": 1747931527145
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931526001
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？\n",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": true,
      "timestamp": 1747931527145
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931526001
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？\n', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: '', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？\n', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: '', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: true
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？
...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":true,"timestamp":1747931527145}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":true,"timestamp":1747931526001}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:1556 [useEffect storage] Skipping message save because response is being processed
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？\n",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": true,
      "timestamp": 1747931527145
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931526001
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？\n",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": true,
      "timestamp": 1747931527145
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931526001
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？\n', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: '', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？\n', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: '', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:658 [handleSend] Received non-text-delta for google/gemini-2.0-flash-001: {"type":"step-finish","finishReason":"stop","usage":{"promptTokens":13,"completionTokens":11,"totalTokens":24},"request":{},"response":{"id":"gen-1747931526-c3tRaWGT9pzcwUMYLE30","timestamp":"2025-05-22T16:32:07.083Z","modelId":"google/gemini-2.0-flash-001","headers":{"cache-control":"no-cache","content-type":"text/event-stream"}},"warnings":[],"isContinued":false,"messageId":"msg-iXsKkMIvmowqH4KMdU43wEI1"}
useChatLogic.ts:658 [handleSend] Received non-text-delta for google/gemini-2.0-flash-001: {"type":"finish","finishReason":"stop","usage":{"promptTokens":13,"completionTokens":11,"totalTokens":24},"response":{"id":"gen-1747931526-c3tRaWGT9pzcwUMYLE30","timestamp":"2025-05-22T16:32:07.083Z","modelId":"google/gemini-2.0-flash-001","headers":{"cache-control":"no-cache","content-type":"text/event-stream"}}}
useChatLogic.ts:665 [handleSend] ストリーミング処理完了: google/gemini-2.0-flash-001, 全テキスト長: 25
useChatLogic.ts:668 [handleSend] Final accumulatedText for google/gemini-2.0-flash-001: こんにちは！何かお手伝いできることはありますか？

useChatLogic.ts:672 [handleSend] Final currentToolCalls for google/gemini-2.0-flash-001: []
useChatLogic.ts:713 [handleSend] 最終的なレスポンス (model: google/gemini-2.0-flash-001): こんにちは！何かお手伝いできることはありますか？
...
useChatLogic.ts:802 [handleSend] All responses completed, resetting isProcessingRef flag
useChatLogic.ts:808 [handleSend] 処理完了後の最終バックアップを更新: 3件
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？\n",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527157
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931526001
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？\n",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527157
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931526001
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？\n', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: '', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？\n', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: '', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
MarkdownTipTapEditor.tsx:254 [MarkdownTipTapEditor] onUpdate triggered. Current markdown: こんにちは Current value prop from parent: こんにちは
MarkdownTipTapEditor.tsx:266 [MarkdownTipTapEditor] onChange skipped because value and currentMarkdown are the same.
MarkdownTipTapEditor.tsx:254 [MarkdownTipTapEditor] onUpdate triggered. Current markdown: こんにちは！何かお手伝いできることはありますか？ Current value prop from parent: こんにちは！何かお手伝いできることはありますか？

MarkdownTipTapEditor.tsx:261 [MarkdownTipTapEditor] onChange called because value and currentMarkdown differ.
useChatLogic.ts:967 Updating assistant messageId: ve491EKC with new content: こんにちは！何かお手伝いできることはありますか？
MarkdownTipTapEditor.tsx:254 [MarkdownTipTapEditor] onUpdate triggered. Current markdown:  Current value prop from parent: 
MarkdownTipTapEditor.tsx:266 [MarkdownTipTapEditor] onChange skipped because value and currentMarkdown are the same.
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: false
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？
...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":false,"timestamp":1747931527157}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":true,"timestamp":1747931526001}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:305 [useEffect messages] 最新メッセージをバックアップ: role=assistant, id=mujy2rZP, timestamp=1747931526001
useChatLogic.ts:1566 [useEffect storage] メッセージ保存: roomId=index.html, 件数=3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931526001
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931526001
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: '', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: '', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: false
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":false,"timestamp":1747931527165,"edited":true}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":true,"timestamp":1747931526001}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:305 [useEffect messages] 最新メッセージをバックアップ: role=assistant, id=mujy2rZP, timestamp=1747931526001
useChatLogic.ts:1566 [useEffect storage] メッセージ保存: roomId=index.html, 件数=3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527170,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931526001
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527170,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931526001
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: '', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: '', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931526001
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931526001
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: '', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: '', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:658 [handleSend] Received non-text-delta for openai/gpt-4o-mini: {"type":"step-start","messageId":"msg-rlKensIYmbn8mzHspxMA4ovo","request":{},"warnings":[]}
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527279
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527279
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: false
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":false,"timestamp":1747931527165,"edited":true}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='こんにちは...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":true,"timestamp":1747931527279}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:305 [useEffect messages] 最新メッセージをバックアップ: role=assistant, id=mujy2rZP, timestamp=1747931527279
useChatLogic.ts:1566 [useEffect storage] メッセージ保存: roomId=index.html, 件数=3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527279
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527279
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527286
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527286
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: false
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":false,"timestamp":1747931527165,"edited":true}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='こんにちは！...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":true,"timestamp":1747931527286}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:305 [useEffect messages] 最新メッセージをバックアップ: role=assistant, id=mujy2rZP, timestamp=1747931527286
useChatLogic.ts:1566 [useEffect storage] メッセージ保存: roomId=index.html, 件数=3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527286
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527286
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527286
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527286
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日は",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527295
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日は",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527295
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日は', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日は', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: false
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":false,"timestamp":1747931527165,"edited":true}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='こんにちは！今日は...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":true,"timestamp":1747931527295}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:305 [useEffect messages] 最新メッセージをバックアップ: role=assistant, id=mujy2rZP, timestamp=1747931527295
useChatLogic.ts:1566 [useEffect storage] メッセージ保存: roomId=index.html, 件数=3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日は",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527295
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日は",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527295
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日は', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日は', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はど",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527303
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はど",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527303
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はど', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はど', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: false
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":false,"timestamp":1747931527165,"edited":true}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='こんにちは！今日はど...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":true,"timestamp":1747931527303}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:305 [useEffect messages] 最新メッセージをバックアップ: role=assistant, id=mujy2rZP, timestamp=1747931527303
useChatLogic.ts:1566 [useEffect storage] メッセージ保存: roomId=index.html, 件数=3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はど",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527303
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はど",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527303
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はど', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はど', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はど",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527303
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はど",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527303
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はど', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はど', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんな",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527314
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんな",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527314
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんな', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんな', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: false
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":false,"timestamp":1747931527165,"edited":true}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='こんにちは！今日はどんな...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":true,"timestamp":1747931527314}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:305 [useEffect messages] 最新メッセージをバックアップ: role=assistant, id=mujy2rZP, timestamp=1747931527314
useChatLogic.ts:1566 [useEffect storage] メッセージ保存: roomId=index.html, 件数=3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんな",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527314
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんな",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527314
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんな', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんな', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなこと",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527321
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなこと",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527321
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなこと', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなこと', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: false
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":false,"timestamp":1747931527165,"edited":true}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='こんにちは！今日はどんなこと...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":true,"timestamp":1747931527321}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:305 [useEffect messages] 最新メッセージをバックアップ: role=assistant, id=mujy2rZP, timestamp=1747931527321
useChatLogic.ts:1566 [useEffect storage] メッセージ保存: roomId=index.html, 件数=3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなこと",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527321
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなこと",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527321
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなこと', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなこと', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなこと",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527321
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなこと",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527321
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなこと', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなこと', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことを",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527498
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことを",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527498
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことを', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことを', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: false
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":false,"timestamp":1747931527165,"edited":true}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='こんにちは！今日はどんなことを...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":true,"timestamp":1747931527498}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:305 [useEffect messages] 最新メッセージをバックアップ: role=assistant, id=mujy2rZP, timestamp=1747931527498
useChatLogic.ts:1566 [useEffect storage] メッセージ保存: roomId=index.html, 件数=3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことを",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527498
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことを",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527498
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことを', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことを', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527505
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527505
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: false
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":false,"timestamp":1747931527165,"edited":true}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='こんにちは！今日はどんなことをお...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":true,"timestamp":1747931527505}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:305 [useEffect messages] 最新メッセージをバックアップ: role=assistant, id=mujy2rZP, timestamp=1747931527505
useChatLogic.ts:1566 [useEffect storage] メッセージ保存: roomId=index.html, 件数=3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527505
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527505
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527512
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527512
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: false
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":false,"timestamp":1747931527165,"edited":true}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='こんにちは！今日はどんなことをお手...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":true,"timestamp":1747931527512}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:305 [useEffect messages] 最新メッセージをバックアップ: role=assistant, id=mujy2rZP, timestamp=1747931527512
useChatLogic.ts:1566 [useEffect storage] メッセージ保存: roomId=index.html, 件数=3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527512
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527512
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527518
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527518
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: false
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":false,"timestamp":1747931527165,"edited":true}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='こんにちは！今日はどんなことをお手伝...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":true,"timestamp":1747931527518}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:305 [useEffect messages] 最新メッセージをバックアップ: role=assistant, id=mujy2rZP, timestamp=1747931527518
useChatLogic.ts:1566 [useEffect storage] メッセージ保存: roomId=index.html, 件数=3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527518
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527518
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝い",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527524
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝い",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527524
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝い', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝い', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: false
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":false,"timestamp":1747931527165,"edited":true}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='こんにちは！今日はどんなことをお手伝い...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":true,"timestamp":1747931527524}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:305 [useEffect messages] 最新メッセージをバックアップ: role=assistant, id=mujy2rZP, timestamp=1747931527524
useChatLogic.ts:1566 [useEffect storage] メッセージ保存: roomId=index.html, 件数=3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝い",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527524
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝い",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527524
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝い', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝い', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできます",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527531
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできます",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527531
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできます', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできます', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: false
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":false,"timestamp":1747931527165,"edited":true}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='こんにちは！今日はどんなことをお手伝いできます...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":true,"timestamp":1747931527531}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:305 [useEffect messages] 最新メッセージをバックアップ: role=assistant, id=mujy2rZP, timestamp=1747931527531
useChatLogic.ts:1566 [useEffect storage] メッセージ保存: roomId=index.html, 件数=3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできます",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527531
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできます",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527531
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできます', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできます', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできます",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527531
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできます",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527531
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできます', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできます', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527540
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527540
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: false
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":false,"timestamp":1747931527165,"edited":true}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='こんにちは！今日はどんなことをお手伝いできますか...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":true,"timestamp":1747931527540}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:305 [useEffect messages] 最新メッセージをバックアップ: role=assistant, id=mujy2rZP, timestamp=1747931527540
useChatLogic.ts:1566 [useEffect storage] メッセージ保存: roomId=index.html, 件数=3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527540
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527540
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか？",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527547
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか？",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527547
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: false
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":false,"timestamp":1747931527165,"edited":true}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='こんにちは！今日はどんなことをお手伝いできますか？...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":true,"timestamp":1747931527547}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:305 [useEffect messages] 最新メッセージをバックアップ: role=assistant, id=mujy2rZP, timestamp=1747931527547
useChatLogic.ts:1566 [useEffect storage] メッセージ保存: roomId=index.html, 件数=3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか？",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527547
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか？",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": true,
      "timestamp": 1747931527547
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
useChatLogic.ts:658 [handleSend] Received non-text-delta for openai/gpt-4o-mini: {"type":"step-finish","finishReason":"stop","usage":{"promptTokens":28,"completionTokens":14,"totalTokens":42},"request":{},"response":{"id":"gen-1747931526-Lf1r7KvmRuzsPwG8j9lu","timestamp":"2025-05-22T16:32:07.244Z","modelId":"openai/gpt-4o-mini","headers":{"cache-control":"no-cache","content-type":"text/event-stream"}},"warnings":[],"isContinued":false,"messageId":"msg-rlKensIYmbn8mzHspxMA4ovo"}
useChatLogic.ts:658 [handleSend] Received non-text-delta for openai/gpt-4o-mini: {"type":"finish","finishReason":"stop","usage":{"promptTokens":28,"completionTokens":14,"totalTokens":42},"response":{"id":"gen-1747931526-Lf1r7KvmRuzsPwG8j9lu","timestamp":"2025-05-22T16:32:07.244Z","modelId":"openai/gpt-4o-mini","headers":{"cache-control":"no-cache","content-type":"text/event-stream"}}}
useChatLogic.ts:665 [handleSend] ストリーミング処理完了: openai/gpt-4o-mini, 全テキスト長: 25
useChatLogic.ts:668 [handleSend] Final accumulatedText for openai/gpt-4o-mini: こんにちは！今日はどんなことをお手伝いできますか？
useChatLogic.ts:672 [handleSend] Final currentToolCalls for openai/gpt-4o-mini: []
useChatLogic.ts:713 [handleSend] 最終的なレスポンス (model: openai/gpt-4o-mini): こんにちは！今日はどんなことをお手伝いできますか？...
useChatLogic.ts:802 [handleSend] All responses completed, resetting isProcessingRef flag
useChatLogic.ts:808 [handleSend] 処理完了後の最終バックアップを更新: 3件
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか？",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": false,
      "timestamp": 1747931527554
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか？",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": false,
      "timestamp": 1747931527554
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
MarkdownTipTapEditor.tsx:254 [MarkdownTipTapEditor] onUpdate triggered. Current markdown: こんにちは！今日はどんなことをお手伝いできますか？ Current value prop from parent: こんにちは！今日はどんなことをお手伝いできますか？
MarkdownTipTapEditor.tsx:266 [MarkdownTipTapEditor] onChange skipped because value and currentMarkdown are the same.
useChatLogic.ts:211 [useEffect messages] メッセージ状態変化直前: 3件, isProcessingRef: false
useChatLogic.ts:216 [useEffect messages] msg[0]: id=6_vPOGQr, role=user, content='こんにちは...', ui={"timestamp":1747931526001}
useChatLogic.ts:216 [useEffect messages] msg[1]: id=ve491EKC, role=assistant, content='こんにちは！何かお手伝いできることはありますか？...', ui={"modelId":"google/gemini-2.0-flash-001","isGenerating":false,"timestamp":1747931527165,"edited":true}
useChatLogic.ts:216 [useEffect messages] msg[2]: id=mujy2rZP, role=assistant, content='こんにちは！今日はどんなことをお手伝いできますか？...', ui={"modelId":"openai/gpt-4o-mini","isGenerating":false,"timestamp":1747931527554}
useChatLogic.ts:227 [useEffect messages] メッセージ状態変化: 3件
useChatLogic.ts:305 [useEffect messages] 最新メッセージをバックアップ: role=assistant, id=mujy2rZP, timestamp=1747931527554
useChatLogic.ts:1566 [useEffect storage] メッセージ保存: roomId=index.html, 件数=3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか？",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": false,
      "timestamp": 1747931527554
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか？",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": false,
      "timestamp": 1747931527554
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか？",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": false,
      "timestamp": 1747931527554
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか？",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": false,
      "timestamp": 1747931527554
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=user, id=6_vPOGQr
ChatResponses.tsx:98 [DEBUG ChatResponses] Rendering user message: 6_vPOGQr
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=ve491EKC
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: ve491EKC, modelId: google/gemini-2.0-flash-001
ChatResponses.tsx:92 [DEBUG ChatResponses] Processing message: role=assistant, id=mujy2rZP
ChatResponses.tsx:142 [DEBUG ChatResponses] Rendering assistant message: mujy2rZP, modelId: openai/gpt-4o-mini
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
Header.tsx:53 [DEBUG] Settings icon clicked
Header.tsx:55 [DEBUG] After handleOpenModal called
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか？",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": false,
      "timestamp": 1747931527554
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか？",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": false,
      "timestamp": 1747931527554
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
SettingsModal.tsx:35 [DEBUG] SettingsModal - isModalOpen: true
SettingsModal.tsx:168 [DEBUG] Close button clicked
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか？",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": false,
      "timestamp": 1747931527554
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatPage.tsx:86 [DEBUG ChatPage] Rendering. roomId: index.html isSharedView: false initialLoadComplete: true error: null
ChatPage.tsx:99 [DEBUG ChatPage] Current messages count: 3
ChatPage.tsx:100 [DEBUG ChatPage] Messages content: [
  {
    "id": "6_vPOGQr",
    "role": "user",
    "content": "こんにちは",
    "ui": {
      "timestamp": 1747931526001
    }
  },
  {
    "id": "ve491EKC",
    "role": "assistant",
    "content": "こんにちは！何かお手伝いできることはありますか？",
    "ui": {
      "modelId": "google/gemini-2.0-flash-001",
      "isGenerating": false,
      "timestamp": 1747931527165,
      "edited": true
    }
  },
  {
    "id": "mujy2rZP",
    "role": "assistant",
    "content": "こんにちは！今日はどんなことをお手伝いできますか？",
    "ui": {
      "modelId": "openai/gpt-4o-mini",
      "isGenerating": false,
      "timestamp": 1747931527554
    }
  }
]
ChatPage.tsx:111 [DEBUG ChatPage] isInitialScreen: false messages.length: 3
ChatPage.tsx:157 [DEBUG ChatPage] Rendering chat screen. Messages count: 3
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
ChatResponses.tsx:43 [DEBUG ChatResponses] Rendering. messages count: 3
ChatResponses.tsx:50 [DEBUG ChatResponses] Messages details:
ChatResponses.tsx:52 Message 0: {id: '6_vPOGQr', role: 'user', content: 'こんにちは', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 1: {id: 've491EKC', role: 'assistant', content: 'こんにちは！何かお手伝いできることはありますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:52 Message 2: {id: 'mujy2rZP', role: 'assistant', content: 'こんにちは！今日はどんなことをお手伝いできますか？', contentType: 'string', ui: {…}, …}
ChatResponses.tsx:71 [DEBUG ChatResponses] Starting message mapping...
SettingsModal.tsx:35 [DEBUG] SettingsModal - isModalOpen: false

---

_**Assistant**_



---

